doctype html
html
  head
    meta(charset='UTF-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    title Produce List
    // Bootstrap 5.3.3 CSS via CDN
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css')
    link(rel='stylesheet' href='/css/procdata.css')

  body
    .container.mt-5
      .d-flex.justify-content-between.align-items-center.mb-4
        h2.text-primary
          i.fas.fa-apple-alt.me-2
          | Produce Inventory
        a.btn.btn-primary(href='/addition')
          i.fas.fa-plus-circle.me-1
          | Add New Produce

      .table-responsive
        table#produceTable.table.table-hover.table-striped.align-middle
          thead.table-dark
            tr
              th Image
              th Name
              th Category
              th Entry Date
              th Tonnage (kg)
              th Cost (Ugx)
              th Price(Ugx)
              th Supplier
              th Contact
              th Branch
              th Actions
          tbody
            if produces.length
              each produce in produces
                tr(data-id=produce._id)
                  td
                    img.produce-img(src='/' + produce.image, alt=produce.productname)
                  td.fw-semibold= produce.productname
                  td
                    span.badge.badge-category.text-white= produce.productType
                  td= moment(produce.entryDate).format('DD MMM YYYY')
                  td= produce.tonnage
                  td.text-success #{produce.cost.toFixed(2)}
                  td.text-success #{produce.sellingPrice.toFixed(2)}
                  td= produce.dealerName
                  td= produce.dealerContact
                  td
                    span.badge.bg-info.text-dark= produce.branch
                  td
                    .d-flex.gap-2
                      a.btn.btn-sm.btn-outline-primary(href='/updateProduce/' + produce._id)
                        i.fas.fa-edit.me-1
                        | Edit
                      a.btn.btn-sm.btn-outline-success(href='/addSale/' + produce._id)
                        i.fas.fa-dollar-sign.me-1
                        | Sale
                      form(action='/deleteProduce', method='post')
                        input(type='hidden', name='id', value=produce._id)
                        button.btn.btn-sm.btn-outline-danger(type='submit', onclick='return confirm("Delete this item?")')
                          i.fas.fa-trash-alt.me-1
                          | Delete
            else
              tr
                td.text-center.py-4(colspan='11')
                  i.fas.fa-box-open.fa-3x.mb-3.text-muted
                  h5 No Produce Found
                  p.text-muted Add your first produce item to get started
                  a.btn.btn-primary.mt-2(href='/addition')
                    i.fas.fa-plus-circle.me-1
                    | Add Produce

    // JavaScript for dynamic updates
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js')
    script(js/procdata.js)