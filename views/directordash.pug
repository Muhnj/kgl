doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title KGL - Director Dashboard
    link(rel='stylesheet', href='/css/mdd.css')
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css')
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css')
    script(src='https://cdn.jsdelivr.net/npm/chart.js')
    script(src='https://unpkg.com/lucide@latest')

  body
    header.header
      .header-container
        .branding
          .logo
            span.icon(data-lucide='bar-chart-2' style='width: 24px; height: 24px')
          h1 KGL Director Dashboard
        .header-controls
          .branch-selector
            span.icon(data-lucide='map-pin' style='width: 18px; height: 18px')
            span#branchName Director View
          a.logout-btn(href="/logout")
            span.icon(data-lucide='log-out' style='width: 18px; height: 18px')
            | Sign Out

    nav.sidebar
      .nav-menu
        a.nav-item(href='/dashboard' class='active')
          span.icon(data-lucide='layout-dashboard')
          span.nav-label Dashboard
        a.nav-item(href='/sales')
          span.icon(data-lucide='dollar-sign')
          span.nav-label Sales
        a.nav-item(href='/credit')
          span.icon(data-lucide='file-text')
          span.nav-label Credit Sales
        a.nav-item(href='/overview')
          span.icon(data-lucide='store')
          span.nav-label Branch Overview

    main.main-content
      .content-header
        h2
          span.icon(data-lucide='layout-dashboard' style='width: 28px; height: 28px')
          | Director Overview

      .analytics-container
        .row.g-4.mb-4
          .col-md-6
            .stats-card
              span.icon(data-lucide='dollar-sign')
              h3 UGX #{totalSalesFormatted}
              p Total Revenue (Paid)
          .col-md-6
            .stats-card
              span.icon(data-lucide='box')
              h3 #{totalRevenue.totalquantitysold || 0} kg
              p Tonnes Sold

        .row.g-4.mb-4
          .col-md-6
            .stats-card
              span.icon(data-lucide='clock')
              h3 UGX #{pendingSalesFormatted}
              p Pending Credit Sales
          .col-md-6
            .stats-card
              span.icon(data-lucide='loader')
              h3 #{creditSales.totalQuantity || 0} kg
              p Quantity Pending

        .row.mt-4
          .col-12
            .chart-card
              h4
                span.icon(data-lucide='store')
                | Branch Sales Overview
              table.table.table-striped
                thead
                  tr
                    th Branch
                    th Total Sales (UGX)
                    th Total Quantity
                tbody
                  each sale in branchSales
                    tr
                      td #{sale._id}
                      td UGX #{sale.totalAmount.toLocaleString()}
                      td #{sale.totalQuantity}

    script.
      lucide.createIcons();
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js')
