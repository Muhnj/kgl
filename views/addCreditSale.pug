doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    title Add Credit Sale - #{produce.productname}
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css')
    link(rel='stylesheet' href='/css/creditsale.css')
    link(href='https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap' rel='stylesheet')
    script(src='https://unpkg.com/lucide@latest')

  body
    header.header
      .header-container
        .branding
          .logo
            span.icon(data-lucide='dollar-sign' style='width: 24px; height: 24px')
          h1 KGL  Dashboard
        .header-controls
          .branch-selector
            span.icon(data-lucide='map-pin' style='width: 18px; height: 18px')
            span#branchName Main Branch
          a.logout-btn(href="/logout")
            span.icon(data-lucide='log-out' style='width: 18px; height: 18px')
            | Sign Out

    nav.sidebar
      .nav-menu
        a.nav-item(href='/procurement')
          span.icon(data-lucide='package' style='width: 20px; height: 20px')
          span.nav-label Procurement
        a.nav-item(href='/ProducesList')
          span.icon(data-lucide='dollar-sign' style='width: 20px; height: 20px')
          span.nav-label Record Sale
        a.nav-item(href='/makesale')
          span.icon(data-lucide='boxes' style='width: 20px; height: 20px')
          span.nav-label Inventory
        a.nav-item(href='/credit-sales' class='active')
          span.icon(data-lucide='file-text' style='width: 20px; height: 20px')
          span.nav-label Credit Sales

    main.main-content
      .content-header
        .header-title
          h2
            span.icon(data-lucide='credit-card' style='width: 28px; height: 28px')
            | Add Credit Sale - #{produce.productname}

      .form-card
        form(action='/addCreditSale/' + produce._id method='post' onsubmit='addEventListener("submit", function (e)')
          .form-grid
            .form-group
              label.form-label(for='productname') Product Name
              input.form-control(type='text' name='productname' value=produce.productname readonly)
              span.text-danger#error-productname

            .form-group
              label.form-label(for='saletonnage') Tonnage (kg)
              input.form-control(type='number' name='saletonnage')
              span.text-danger#error-saletonnage

            .form-group
              label.form-label(for='saleDate') Date of Sale
              input.form-control(type='date' name='saleDate' value=today)
              span.text-danger#error-saleDate

            .form-group
              label.form-label(for='saleTime') Time of Sale
              input.form-control(type='time' name='saleTime')
              span.text-danger#error-saleTime

            .form-group
              label.form-label(for='totalAmount') Total Amount (UGX)
              input.form-control(type='number' name='totalAmount')
              span.text-danger#error-totalAmount

            .form-group
              label.form-label(for='buyerName') Buyer Name
              input.form-control(type='text' name='buyerName')
              span.text-danger#error-buyerName

            .form-group
              label.form-label(for='buyerContact') Buyer Contact
              input.form-control(type='tel' name='buyerContact')
              span.text-danger#error-buyerContact

            .form-group
              label.form-label(for='location') Location
              input.form-control(type='text' name='location')
              span.text-danger#error-location

            .form-group
              label.form-label(for='nationalId') National ID
              input.form-control(type='text' name='nationalId')
              span.text-danger#error-nationalId

            .form-group
              label.form-label(for='dueDate') Due Date
              input.form-control(type='date' name='dueDate')
              span.text-danger#error-dueDate

            .form-group
              label.form-label(for='dispatchDate') Dispatch Date
              input.form-control(type='date' name='dispatchDate')
              span.text-danger#error-dispatchDate

            .form-group
              label.form-label(for='branch') Branch
              input.form-control(type='text' name='branch' value=branch readonly)
              span.text-danger#error-branch

            .form-group
              label.form-label(for='agentName') Agent Name
              input.form-control(type='text' name='agentName' value=username readonly)
              span.text-danger#error-agentName

          .form-actions
            button.btn.btn-primary(type='submit')
              span.icon(data-lucide='check-circle')
              | Submit Sale

    script.
      lucide.createIcons();
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js')
    script(src='/js/credit-sale-validation.js')
